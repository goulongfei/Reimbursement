<style>
    .editStyle {
        background-color: yellow !important
    }

    .fixedHeader table {
        border-collapse: collapse;
        border-spacing: 0px;
        width: 100%;
        table-layout: fixed;
        position: relative;
    }

        .fixedHeader table td {
            word-break: break-all;
            word-wrap: break-word;
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            border: 1px solid #ddd;
            line-height: 35px;
            padding: 0 10px 0 10px;
        }

        .fixedHeader table th {
            white-space: nowrap;
            border: 1px solid #ddd;
            height: 35px;
        }

    .t_r_title {
        width: 100%;
        overflow: hidden;
    }

        .t_r_title table thead tr th {
            width: 180px !important;
            text-align: center;
        }

    .t_r_content {
        width: 100%;
        background: #fff;
        overflow: auto;
    }

        .t_r_content table td {
            text-align: center;
            font-weight: initial;
            width: 180px !important;
        }
</style>

<div>
    <h4 class="control-heading bg-info"><i class="glyphicon glyphicon-list-alt"></i>采购计划信息<i class="glyphicon glyphicon-fullscreen" style="margin-left:86%;font-size:14px" ng-click="baseInfo.selectCodation.fullscreen()"></i></h4>
    <div class="form-inline">
        <div class="col-xs-12 col-sm-12 col-md-12 form-group">
            <label class="col-xs-6 col-sm-3 col-md-2 control-label" title="采购方式" style="text-align:right;">采购方式</label>
            <div class="col-xs-6 col-sm-9 col-md-10 form-group baseifo-input" sog-valide-status="采购方式">
                <span style="padding-right:10px;"><input type="checkbox" ng-model="baseInfo.codation.purchaseWaySelectAll" ng-change="baseInfo.selectCodation.selectPurchaseWayAll()" />全部</span>
                <span style="padding-right:10px;" ng-repeat="item in viewModel.purchaseWays">
                    <input type="checkbox" ng-model="item.checked" ng-change="baseInfo.selectCodation.selectPurchaseWay()" />{{item.name}}
                </span>
            </div>
        </div>
        <div class="clearfix "></div>
        <div class="col-xs-12 col-sm-12 col-md-12 form-group">
            <label class="col-xs-6 col-sm-3 col-md-2 control-label" title="合约分类" style="text-align:right;">合约分类</label>
            <div class="col-xs-6 col-sm-9 col-md-10 form-group baseifo-input" sog-valide-status="合约分类">
                <span style="padding-right:10px;"><input type="checkbox" ng-model="baseInfo.codation.contractAgreementTypeSelectAll" ng-change="baseInfo.selectCodation.selectContractAgreementTypeAll()" />全部</span>
                <span style="padding-right:10px;" ng-repeat="item in viewModel.contractAgreementTypes">
                    <input type="checkbox" ng-model="item.checked" ng-change="baseInfo.selectCodation.selectContractAgreementType()" />{{item.name}}
                </span>
            </div>
        </div>
        <div class="clearfix "></div>
        <div class="col-xs-12 col-sm-12 col-md-12 form-group">
            <label class="col-xs-6 col-sm-3 col-md-2 control-label" title="采购状态" style="text-align:right;">采购状态</label>
            <div class="col-xs-6 col-sm-9 col-md-10 form-group baseifo-input" sog-valide-status="采购状态">
                <span style="padding-right:10px;"><input type="checkbox" ng-model="baseInfo.codation.purchaseStateSelectAll" ng-change="baseInfo.selectCodation.selectPurchaseStateAll()" />全部</span>
                <span style="padding-right:10px;" ng-repeat="item in viewModel.purchaseStates">
                    <input type="checkbox" ng-model="item.checked" ng-change="baseInfo.selectCodation.selectPurchaseState()" />{{item.name}}
                </span>
            </div>
        </div>
        <div class="clearfix "></div>
        <div class="col-xs-12 col-sm-12 col-md-12 form-group">
            <label class="col-xs-6 col-sm-3 col-md-2 control-label" title="关键字搜索" style="text-align:right;">关键字搜索</label>
            <div class="col-xs-6 col-sm-9 col-md-10 form-group baseifo-input" sog-valide-status="关键字搜索">
                <input type="text" class="meeting" ng-model="baseInfo.codation.purchaseName" />
            </div>
        </div>
        <div class="clearfix "></div>
        <div class="col-xs-12 col-sm-12 col-md-12 form-group" style="margin-top:10px;text-align:center;">
            <button class="btn btn-default" style="cursor:pointer;width:100px;height:30px;margin-right:50px;" ng-click="baseInfo.selectCodation.resetCodation()">重置</button>
            <button class="btn btn-primary" style="cursor:pointer;width:100px;height:30px;" ng-click="baseInfo.selectCodation.search()">查询</button>
        </div>
        <div class="clearfix "></div>
    </div>
    <div class="form-inline">
        <span style="cursor:pointer;color:blue;float:right;" ng-click="purchasePlan.exportPurchasePlanDetail()">导出采购计划明细</span>
        <div class="col-xs-12 col-sm-12 col-md-12 form-group">
            <h5 class="page-header" style="border-bottom:1px solid #0026ff"></h5>
        </div>
        <!--编辑-->
        <div class="col-xs-12 col-sm-12 col-md-12 form-group" ng-if="!readOnly">
            <button class="btn btn-primary" style="cursor:pointer" ng-click="purchasePlan.addPurchasePlan()">+增加</button>
            <button class="btn btn-danger" style="cursor:pointer" ng-click="purchasePlan.delPurchasePlan()">-删除</button>
            <div class="fixedHeader">
                <div class="t_r_title">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 40px !important;" class="table-thead">
                                    <input type="checkbox" ng-model="purchasePlan.purchasePlanAll" ng-change="purchasePlan.purchaseSelectedAll()" />
                                </th>
                                <th style="width: 45px !important;" class="table-thead">序号</th>
                                <th style="width:300px !important;" class="table-thead">采购名称</th>
                                <th style="width:300px !important;" class="table-thead">关联的合约名称</th>
                                <th style="width:100px !important;" class="table-thead">标段数量</th>
                                <th class="table-thead">采购方式</th>
                                <th class="table-thead">采购状态</th>
                                <th class="table-thead">成本归属</th>
                                <th class="table-thead">合约类别</th>
                                <th class="table-thead">合约分类</th>
                                <th class="table-thead">行业领域</th>
                                <th class="table-thead">采购前置需求</th>
                                <th class="table-thead">图纸预计完成日期</th>
                                <th class="table-thead">设计封样时间</th>
                                <th class="table-thead">技术要求提供时间</th>
                                <th class="table-thead">供应商入库开始日期（如需）</th>
                                <th class="table-thead">计划采购开始日期</th>
                                <th class="table-thead">计划采购完成日期</th>
                                <th style="width: 100px !important;" class="table-thead">周期（天）</th>
                                <th class="table-thead">合同订立日期</th>
                                <th class="table-thead">计划进场/供货日期</th>
                                <th style="width: 200px !important;" class="table-thead">预计采购金额(元)</th>
                                <th class="table-thead">采购主责人</th>
                                <th class="table-thead">实际开始日期</th>
                                <th class="table-thead">实际完成日期</th>
                                <th style="width: 200px !important;" class="table-thead">实际采购金额(元)</th>
                                <th class="table-thead">对应合同名称</th>
                                <th style="width: 300px !important;" class="table-thead">备注</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="t_r_content idt_r_content" fixed-header>
                    <table class="table table-bordered table-striped">
                        <tbody>
                            <tr ng-repeat="item in baseInfo.data|orderBy : 'sortNo' : false" id="{{item.code}}" ng-class="{editStyle:item.edit==true}" ng-click="purchasePlan.editPurchasePlan(item)">
                                <td style="width: 40px !important;" class="table-thead">
                                    <input type="checkbox" ng-disabled="item.purchaseStateCode!=1" ng-model="item.checked" ng-change="purchasePlan.purchaseSelected()" />
                                </td>
                                <td style="width: 45px !important;">{{$index+1}}</td>
                                <td style="text-align:left;width: 300px !important;">
                                    <input class="meeting" ng-if="item.purchaseStateCode==1" ng-model="item.purchaseName" />
                                    <div ng-if="item.purchaseStateCode!=1">
                                        <div style="width: 9px;height: 9px;border-radius: 50%;background-color: #FF0000;margin-right: 8px;margin-top : 6px;float:left" ng-if="item.purchaseLightShow == 3"></div>
                                        <div style="width: 9px;height: 9px;border-radius: 50%;background-color: #FFCC00;margin-right: 8px;margin-top : 6px;float:left" ng-if="item.purchaseLightShow == 2"></div>
                                        <div style="width: 9px;height: 9px;border-radius: 50%;background-color: #00CC00;margin-right: 8px;margin-top : 6px;float:left" ng-if="item.purchaseLightShow == 1"></div>
                                    </div>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;" ng-if="item.purchaseStateCode!=1" title="{{item.purchaseName}}">
                                        {{item.purchaseName}}
                                    </p>
                                </td>
                                <td style="text-align:left;width: 300px !important;">
                                    <div ng-if="item.purchaseStateCode==1">
                                        <input type="text" class="meeting" style="width:90%" ng-model="item.contractAgreementNameStr" disabled="disabled" />
                                        <i ng-click="purchasePlan.selectContractAgreement(item)" class="glyphicon glyphicon-folder-open ng-scope" style="cursor:pointer;"></i>
                                    </div>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" ng-if="item.purchaseStateCode!=1" title="{{item.contractAgreementNameStr}}">
                                        {{item.contractAgreementNameStr}}
                                    </p>
                                </td>
                                <td style="width: 100px !important;">
                                    <div wf-digital opts="baseInfo.digitalOpts" ng-if="item.purchaseStateCode==1" class="meeting" ng-model="item.biddingSectionCount"></div>
                                    <span ng-if="item.purchaseStateCode!=1">{{item.biddingSectionCount}}</span>
                                </td>
                                <td>
                                    <select class="meeting" ng-if="item.purchaseStateCode==1" ng-model="item.purchaseWayCode" ng-change="purchasePlan.selectPurchaseWay(item)" ng-options="p.code as p.name for p in viewModel.purchaseWays" ng-selected="p.code == item.purchaseWayCode">
                                        <option value="">请选择</option>
                                    </select>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" ng-if="item.purchaseStateCode!=1" title="{{item.purchaseWayName}}">
                                        {{item.purchaseWayName}}
                                    </p>
                                </td>
                                <td>
                                    <p ng-if="item.purchaseStateCode==1" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.purchaseStateName}}">
                                        {{item.purchaseStateName}}
                                    </p>
                                    <p ng-if="item.purchaseStateCode!=1" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;color:blue;" ng-click="purchasePlan.searchPurchase(item.purchaseCode)" title="{{item.purchaseStateName}}">
                                        {{item.purchaseStateName}}
                                    </p>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.costBelongName}}">
                                        {{item.costBelongName}}
                                    </p>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.contractAgreementCategoryNameStr}}">
                                        {{item.contractAgreementCategoryNameStr}}
                                    </p>
                                </td>
                                <td>
                                    <select class="meeting" ng-if="item.purchaseStateCode==1" ng-model="item.contractAgreementTypeCode" ng-change="purchasePlan.selectContractAgreementType(item)" ng-options="p.code as p.name for p in viewModel.contractAgreementTypes" ng-selected="p.code == item.contractAgreementTypeCode">
                                        <option value="">请选择</option>
                                    </select>
                                    <p ng-if="item.purchaseStateCode!=1" style="max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.contractAgreementTypeName}}">
                                        {{item.contractAgreementTypeName}}
                                    </p>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode==1" supplier-category data="item" opts="purchasePlan.tradeCatagoryOpts" ispurchase-plan="true" single="true"></span>
                                    <p ng-if="item.purchaseStateCode!=1" title="{{item.industryDomainName}}">
                                        {{item.industryDomainName}}
                                    </p>
                                </td>
                                <td>
                                    <div ng-if="item.purchaseStateCode==1">
                                        <span purchase-plan-file-info-extend purchase-file-info="item" specialty="purchasePlan.specialty" readonly="false" is-completed="purchasePlan.isCompleted"></span>
                                    </div>
                                    <div ng-if="item.purchaseStateCode!=1">
                                        <span purchase-plan-file-info-extend purchase-file-info="item" specialty="purchasePlan.specialty" readonly="true" is-completed="purchasePlan.isCompleted"></span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="preDrawingcompleteDate" my-calendar my-date="item.preDrawingcompleteDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.preDrawingcompleteDate!='1901-01-01T00:00:00+08:00'&&item.preDrawingcompleteDate!='0001-01-01T00:00:00'&&item.preDrawingcompleteDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preDrawingcompleteDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="technologySealedDate" my-calendar my-date="item.technologySealedDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.technologySealedDate!='1901-01-01T00:00:00+08:00'&&item.technologySealedDate!='0001-01-01T00:00:00'&&item.technologySealedDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.technologySealedDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="technologyRequireOfferDate" my-calendar my-date="item.technologyRequireOfferDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.technologyRequireOfferDate!='1901-01-01T00:00:00+08:00'&&item.technologyRequireOfferDate!='0001-01-01T00:00:00'&&item.technologyRequireOfferDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.technologyRequireOfferDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="preSupplierPutInDate" my-calendar my-date="item.preSupplierPutInDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.preSupplierPutInDate!='1901-01-01T00:00:00+08:00'&&item.preSupplierPutInDate!='0001-01-01T00:00:00'&&item.preSupplierPutInDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preSupplierPutInDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="preStartDate" my-calendar my-date="item.preStartDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.preStartDate!='1901-01-01T00:00:00+08:00'&&item.preStartDate!='0001-01-01T00:00:00'&&item.preStartDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preStartDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="preEndDate" my-calendar my-date="item.preEndDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.preEndDate!='1901-01-01T00:00:00+08:00'&&item.preEndDate!='0001-01-01T00:00:00'&&item.preEndDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preEndDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td style="width: 100px !important;">
                                    <span ng-if="item.purchaseStateCode==1">{{item.prePeriod}}</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.prePeriod!=0">{{item.prePeriod}}</span>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="preContractSignDate" my-calendar my-date="item.preContractSignDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.preContractSignDate!='1901-01-01T00:00:00+08:00'&&item.preContractSignDate!='0001-01-01T00:00:00'&&item.preContractSignDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preContractSignDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div ng-if="item.purchaseStateCode==1" id="preEnterSupplyDate" my-calendar my-date="item.preEnterSupplyDate"></div>
                                        <span ng-if="item.purchaseStateCode!=1&&item.preEnterSupplyDate!='1901-01-01T00:00:00+08:00'&&item.preEnterSupplyDate!='0001-01-01T00:00:00'&&item.preEnterSupplyDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preEnterSupplyDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td style="width: 200px !important;">
                                    <span ng-if="item.prePurchaseAmount!=0">{{item.prePurchaseAmount|number:2}}</span>
                                </td>
                                <td>
                                    <div ng-if="item.purchaseStateCode==1" sog-ogu-input="item.purchaseMainUser" opts="baseInfo.selectRadioPeople"></div>
                                    <span ng-if="item.purchaseStateCode!=1&&item.purchaseMainUser" wf-user-presence="item.purchaseMainUser"></span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode==1">--</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.actualStartDate!='1901-01-01T00:00:00+08:00'&&item.actualStartDate!='0001-01-01T00:00:00'&&item.actualStartDate!='0001-01-01T00:00:00+08:00'">
                                        {{item.actualStartDate|date:'yyyy-MM-dd'}}
                                    </span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode==1">--</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.actualEndDate!='1901-01-01T00:00:00+08:00'&&item.actualEndDate!='0001-01-01T00:00:00'&&item.actualEndDate!='0001-01-01T00:00:00+08:00'">
                                        {{item.actualEndDate|date:'yyyy-MM-dd'}}
                                    </span>
                                </td>
                                <td style="width: 200px !important;">
                                    <span ng-if="item.purchaseStateCode==1">--</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.actualPurchaseAmount!=0">{{item.actualPurchaseAmount|number:2}}</span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode===1&&item.purchaseStateCode===2">--</span>
                                    <div ng-if="item.purchaseStateCode!==1||item.purchaseStateCode!==2">
                                        <span ng-repeat="contract in purchasePlan.getContractList(item.code)" style="margin-right:10px;cursor:pointer;color:blue;" ng-click="purchasePlan.searchContract(contract)">{{contract.contractName}};</span>
                                    </div>
                                </td>
                                <td style="width: 300px !important;">
                                    <input class="meeting" ng-if="item.purchaseStateCode==1" ng-model="item.remark" />
                                    <span ng-if="item.purchaseStateCode!=1">--</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer text-center">
                <div class="col-xs-12 form-group">
                    <div class="foot-page pull-right" tm-pagination="baseInfo.selectCommodityPaging"></div>
                </div>
            </div>
        </div>
        <!--只读-->
        <div class="col-xs-12 col-sm-12 col-md-12 form-group" ng-if="readOnly">
            <div class="fixedHeader">
                <div class="t_r_title">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 45px !important;" class="table-thead">序号</th>
                                <th style="width:300px !important;" class="table-thead">采购名称</th>
                                <th style="width:300px !important;" class="table-thead">关联的合约名称</th>
                                <th style="width:100px !important;" class="table-thead">标段数量</th>
                                <th class="table-thead">采购方式</th>
                                <th class="table-thead">采购状态</th>
                                <th class="table-thead">成本归属</th>
                                <th class="table-thead">合约类别</th>
                                <th class="table-thead">合约分类</th>
                                <th class="table-thead">行业领域</th>
                                <th class="table-thead">采购前置需求</th>
                                <th class="table-thead">图纸预计完成日期</th>
                                <th class="table-thead">设计封样时间</th>
                                <th class="table-thead">技术要求提供时间</th>
                                <th class="table-thead">供应商入库开始日期（如需）</th>
                                <th class="table-thead">计划采购开始日期</th>
                                <th class="table-thead">计划采购完成日期</th>
                                <th style="width: 100px !important;" class="table-thead">周期（天）</th>
                                <th class="table-thead">合同订立日期</th>
                                <th class="table-thead">计划进场/供货日期</th>
                                <th style="width: 200px !important;" class="table-thead">预计采购金额(元)</th>
                                <th class="table-thead">采购主责人</th>
                                <th class="table-thead">实际开始日期</th>
                                <th class="table-thead">实际完成日期</th>
                                <th style="width: 200px !important;" class="table-thead">实际采购金额(元)</th>
                                <th class="table-thead">对应合同名称</th>
                                <th style="width: 300px !important;" class="table-thead">备注</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="t_r_content idt_r_content" fixed-header>
                    <table class="table table-bordered table-striped">
                        <tbody>
                            <tr ng-repeat="item in baseInfo.data|orderBy : 'sortNo' : false" ng-class="{editStyle:item.edit==true}" ng-click="purchasePlan.editPurchasePlan(item)">
                                <td style="width: 45px !important;">{{$index+1}}</td>
                                <td style="text-align:left;width: 300px !important;">
                                    <div ng-if="item.purchaseStateCode!=1">
                                        <div style="width: 9px;height: 9px;border-radius: 50%;background-color: #FF0000;margin-right: 8px;margin-top : 6px;float:left" ng-if="item.purchaseLightShow == 3"></div>
                                        <div style="width: 9px;height: 9px;border-radius: 50%;background-color: #FFCC00;margin-right: 8px;margin-top : 6px;float:left" ng-if="item.purchaseLightShow == 2"></div>
                                        <div style="width: 9px;height: 9px;border-radius: 50%;background-color: #00CC00;margin-right: 8px;margin-top : 6px;float:left" ng-if="item.purchaseLightShow == 1"></div>
                                    </div>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.purchaseName}}">
                                        {{item.purchaseName}}
                                    </p>
                                </td>
                                <td style="text-align:left;width: 300px !important;">
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.contractAgreementNameStr}}">
                                        {{item.contractAgreementNameStr}}
                                    </p>
                                </td>
                                <td style="width: 100px !important;">
                                    <span>{{item.biddingSectionCount}}</span>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.purchaseWayName}}">
                                        {{item.purchaseWayName}}
                                    </p>
                                </td>
                                <td>
                                    <p ng-if="item.purchaseStateCode==1" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.purchaseStateName}}">
                                        {{item.purchaseStateName}}
                                    </p>
                                    <p ng-if="item.purchaseStateCode!=1" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;color:blue;" ng-click="purchasePlan.searchPurchase(item.purchaseCode)" title="{{item.purchaseStateName}}">
                                        {{item.purchaseStateName}}
                                    </p>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.costBelongName}}">
                                        {{item.costBelongName}}
                                    </p>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.contractAgreementCategoryNameStr}}">
                                        {{item.contractAgreementCategoryNameStr}}
                                    </p>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.contractAgreementTypeName}}">
                                        {{item.contractAgreementTypeName}}
                                    </p>
                                </td>
                                <td>
                                    <p style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.industryDomainName}}">
                                        {{item.industryDomainName}}
                                    </p>
                                </td>
                                <td>
                                    <span purchase-plan-file-info-extend purchase-file-info="item" specialty="purchasePlan.specialty" readonly="true" is-completed="purchasePlan.isCompleted"></span>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.preDrawingcompleteDate!='1901-01-01T00:00:00+08:00'&&item.preDrawingcompleteDate!='0001-01-01T00:00:00'&&item.preDrawingcompleteDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preDrawingcompleteDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.technologySealedDate!='1901-01-01T00:00:00+08:00'&&item.technologySealedDate!='0001-01-01T00:00:00'&&item.technologySealedDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.technologySealedDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.technologyRequireOfferDate!='1901-01-01T00:00:00+08:00'&&item.technologyRequireOfferDate!='0001-01-01T00:00:00'&&item.technologyRequireOfferDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.technologyRequireOfferDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.preSupplierPutInDate!='1901-01-01T00:00:00+08:00'&&item.preSupplierPutInDate!='0001-01-01T00:00:00'&&item.preSupplierPutInDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preSupplierPutInDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.preStartDate!='1901-01-01T00:00:00+08:00'&&item.preStartDate!='0001-01-01T00:00:00'&&item.preStartDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preStartDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.preEndDate!='1901-01-01T00:00:00+08:00'&&item.preEndDate!='0001-01-01T00:00:00'&&item.preEndDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preEndDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td style="width: 100px !important;">
                                    <span ng-if="item.purchaseStateCode==1">{{item.prePeriod}}</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.prePeriod!=0">{{item.prePeriod}}</span>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.preContractSignDate!='1901-01-01T00:00:00+08:00'&&item.preContractSignDate!='0001-01-01T00:00:00'&&item.preContractSignDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preContractSignDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <span ng-if="item.preEnterSupplyDate!='1901-01-01T00:00:00+08:00'&&item.preEnterSupplyDate!='0001-01-01T00:00:00'&&item.preEnterSupplyDate!='0001-01-01T00:00:00+08:00'">
                                            {{item.preEnterSupplyDate|date:'yyyy-MM-dd'}}
                                        </span>
                                    </div>
                                </td>
                                <td style="width: 200px !important;">
                                    <span ng-if="item.prePurchaseAmount!=0">{{item.prePurchaseAmount|number:2}}</span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseMainUser" wf-user-presence="item.purchaseMainUser"></span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode==1">--</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.actualStartDate!='1901-01-01T00:00:00+08:00'&&item.actualStartDate!='0001-01-01T00:00:00'&&item.actualStartDate!='0001-01-01T00:00:00+08:00'">
                                        {{item.actualStartDate|date:'yyyy-MM-dd'}}
                                    </span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode==1">--</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.actualEndDate!='1901-01-01T00:00:00+08:00'&&item.actualEndDate!='0001-01-01T00:00:00'&&item.actualEndDate!='0001-01-01T00:00:00+08:00'">
                                        {{item.actualEndDate|date:'yyyy-MM-dd'}}
                                    </span>
                                </td>
                                <td style="width: 200px !important;">
                                    <span ng-if="item.purchaseStateCode==1">--</span>
                                    <span ng-if="item.purchaseStateCode!=1&&item.actualPurchaseAmount!=0">{{item.actualPurchaseAmount|number:2}}</span>
                                </td>
                                <td>
                                    <span ng-if="item.purchaseStateCode===1&&item.purchaseStateCode===2">--</span>
                                    <div ng-if="item.purchaseStateCode!==1||item.purchaseStateCode!==2">
                                        <span ng-repeat="contract in purchasePlan.getContractList(item.code)" style="margin-right:10px;cursor:pointer;color:blue;" ng-click="purchasePlan.searchContract(contract)">{{contract.contractName}}</span>
                                    </div>
                                </td>
                                <td style="width: 300px !important;">
                                    <p ng-if="item.purchaseStateCode==1" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;" title="{{item.remark}}">
                                        {{item.remark}}
                                    </p>
                                    <span ng-if="item.purchaseStateCode!=1">--</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer text-center">
                <div class="col-xs-12 form-group">
                    <div class="foot-page pull-right" tm-pagination="baseInfo.selectCommodityPaging"></div>
                </div>
            </div>
        </div>
    </div>
</div>